##
## Copyright (c) 2000, 2001 Analog Devices Inc.,
## Copyright (c) 2000, 2001 Lineo, Inc./Lineo Canada Corp. (www.lineo.com),
## Copyright (c) 2001-2002 Arcturus Networks Inc, (www.arcturusnetworks.com),
## Copyright (c) 2003 Metrowerks Inc, (www.metrowerks.com)
##
## Ported for Blackfin/Frio Architecture by 
##		Akbar Hussain  <akbar.hussain@arcturusnetworks.com>,
##		Tony Kou <tonyko@arcturusnetworks.com>
##		Faisal Akber <fakber@arcturusnetworks.com>
## 


## Target part of the Makefile

LIBGCC1 = libgcc1-asm.a
CROSS_LIBGCC1 = libgcc1-asm.a
LIB1ASMSRC = bfin/lib1funcs.asm

LIB1ASMFUNCS = 	_addsf3 _divsf3 _fixsfsi _lesf2 _modsi3 _nesf2 \
		_divsi3 _fixunssfdi _gesf2 _mulsf3 _subsf3 \
		_fixunssfsi _udivsi3 \
		_eqsf2 _gtsf2 _umodsi3 \
		_cmpsf2 _fixsfdi _floatsisf _ltsf2 _negsf2 \
		_truncdfsf2 _extendsfdf2 \
		_floatsidf

# Hard code LIB2FUNCS so that DI and DF functions are not included.
# Faisal Akber - 2001-12-11

# Assembler problems with 
# _udiv_w_sdiv
# _cmpdi2
# _ucmpdi2
# _fixunssfsi
# __gcc_bcmp
# _varargs
# __dummy
# _clear_cache
# __main
# _exit
# _pure



LIB2FUNCS = _muldi3 _divdi3 _moddi3 _udivdi3 _umoddi3 _negdi2 \
     _lshrdi3 _ashldi3 _ashrdi3 _ffsdi2 \
    _udiv_w_sdiv _udivmoddi4 _cmpdi2 _ucmpdi2 _floatdidf _floatdisf \
    _fixunsdfsi _fixunssfsi _fixunsdfdi _fixdfdi _fixunssfdi _fixsfdi \
    _fixxfdi _fixunsxfdi _floatdixf _fixunsxfsi \
    _fixtfdi _fixunstfdi _floatditf \
    __gcc_bcmp _varargs __dummy _eprintf \
    _bb _shtab _clear_cache _trampoline __main _exit \
    _ctors _pure _gedf2 _nedf2 _adddf3 _subdf3 _muldf3 \
    _divdf3 _cmpdf2 _eqdf2 _ltdf2 _gtdf2 _negdf2 _fixdfsi \


LANGUAGES = c

#cpp_install_dir=$(prefix)/bin
#CROSS_INCLUDE_DIR=$(tooldir)/include
#INSTALL_HEADERS=
#LIBC=$(tooldir)/lib

TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc -DDF=SF
#Steven TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc
#Tonyko		TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc -DDF=SF
# commented out because of __mulsf3
 LIB2FUNCS_EXTRA = fp-bit.c

FPBIT = fp-bit.c
DPBIT = dp-bit.c


dp-bit.c: $(srcdir)/config/fp-bit.c
	cat $(srcdir)/config/fp-bit.c > dp-bit.c

#
# commented out because of __mulsf3
#
fp-bit.c: $(srcdir)/config/fp-bit.c
	echo '#define FLOAT' > fp-bit.c
	echo '#define FLOAT_ONLY' >> fp-bit.c
	echo '#define SMALL_MACHINE' >> fp-bit.c
	cat $(srcdir)/config/fp-bit.c >> fp-bit.c

# This shouldn't be needed here.  I added it to the specs file for now, until
# it is fixed in binutils (if it is necessary).
GCC_CFLAGS += -N

