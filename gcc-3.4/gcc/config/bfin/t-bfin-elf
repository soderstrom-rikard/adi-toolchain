##
## Copyright (c) 2000, 2001 Analog Devices Inc.,
## Copyright (c) 2000, 2001 Lineo, Inc./Lineo Canada Corp. (www.lineo.com),
## Copyright (c) 2001-2002 Arcturus Networks Inc, (www.arcturusnetworks.com),
## Copyright (c) 2003 Metrowerks Inc, (www.metrowerks.com)
##
## Ported for Blackfin/Frio Architecture by 
##		Akbar Hussain  <akbar.hussain@arcturusnetworks.com>,
##		Tony Kou <tonyko@arcturusnetworks.com>
##		Faisal Akber <fakber@arcturusnetworks.com>
## 


## Target part of the Makefile

LIBGCC1 = libgcc1-asm.a
CROSS_LIBGCC1 = libgcc1-asm.a
LIB1ASMSRC = bfin/lib1funcs.asm

LIB1ASMFUNCS = 	_addsf3 _divsf3 _lesf2 _modsi3 _nesf2 \
	_divsi3 _gesf2 _mulsf3 _subsf3 _udivsi3 \
	_eqsf2 _gtsf2 _umodsi3 \
	_cmpsf2 _floatsisf _ltsf2 _negsf2 _extendsfdf2 \
	_truncdfsf2

LIB2FUNCS = _muldi3 _divdi3 _moddi3 _udivdi3 _umoddi3 _negdi2 \
     _lshrdi3 _ashldi3 _ashrdi3 _ffsdi2 \
    _udiv_w_sdiv _udivmoddi4 _cmpdi2 _ucmpdi2 \
    __gcc_bcmp _varargs __dummy _eprintf \
    _bb _shtab _clear_cache _trampoline __main _exit \
    _ctors _pure \

LANGUAGES = c

#cpp_install_dir=$(prefix)/bin
#CROSS_INCLUDE_DIR=$(tooldir)/include
#INSTALL_HEADERS=
#LIBC=$(tooldir)/lib

TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc
#Steven TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc
#Tonyko		TARGET_LIBGCC2_CFLAGS = -Dinhibit_libc -DDF=SF
# commented out because of __mulsf3
# LIB2FUNCS_EXTRA = fp-bit.c

FPBIT = fp-bit.c
DPBIT = dp-bit.c

dp-bit.c: $(srcdir)/config/fp-bit.c
	cat $(srcdir)/config/fp-bit.c > dp-bit.c

#
# commented out because of __mulsf3
#
fp-bit.c: $(srcdir)/config/fp-bit.c
	echo '#define FLOAT' > fp-bit.c
	cat $(srcdir)/config/fp-bit.c >> fp-bit.c

# This shouldn't be needed here.  I added it to the specs file for now, until
# it is fixed in binutils (if it is necessary).
GCC_CFLAGS += -N

